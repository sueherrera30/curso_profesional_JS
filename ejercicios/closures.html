<html>
  <head>
    <title>Closures</title>
  </head>

  <body>
    <a href="/ejercicios/">Go back</a>
    <p><em>Abre la consola</em></p>

    <script>

      // C L O S U R E S :

      // 1.- esta es una funcion que esta en un entorno global
      let color = 'pink';
      function imprimirColor(){
        console.log(color);
      }
      //imprimirColor(color)
   
      // 2.- hacemos un IFFE una funcion que se llama a si misma: immediately invoked function expression , se escribe como anonima y se pasa entre parentesis y al final e invoca con ();
      (function() {
        let color = 'pink iffeño';
        function imprimirColor(){
          console.log(color);
        }
        //imprimirColor();
      })(); 

      // 3.- funcion que va a hacer funciones:

      // creamos una funicon que nos genera mensajes,el color que esta interpolado se refiere al parametro que estamos pasando, que igual es una variable.
      // esta funcion va a retornar otra funcion.
      // llamamos a la funcion dentro de una variable.
      function makeColorPrinter(color){
        let colorMessage = ` the color is ${color}`;

        return function(){
          console.log(colorMessage)
        }
      }
      /// aqui al llamar a makeColorGreen, pese a que este guardada como variable debemos llamarla como funcion 
      //por que si no no va a arrojar nada, estas es un acción debe ejecutarse.
      //lo que regresa es uan funcion y hay que ejecutarla 
      //esta funcion esta recordando el mensaje que se difinio,MEMORIZO EL SCOPE  pese a que este dentro: esto es CLOUSERS.
      // nos permite hacer funciones privadas. 
      let makeColorGreen = makeColorPrinter('green');
      console.log(makeColorGreen())

      //4.-  quiero que NADIE tenga acceso a mi valor, no podemos modificarlo directamente, como sovbre escribirlo
      // tiene que ser atrabes de las funciones, nos ayuda a crear valores predefinidos y trabajar despues con esos valores através de las funciones
      
      const counter = {
        count: 3,
      }
      // aquim podemos modificar nuestra inforamción muy facil,se puede acceder de forma global.
      counter.count = 99;
      //console.log(counter.count);

      // 5. hacemos privada con clousers
      // PRIMERO hacemos una funcion general donde encapsularemos, ahi retornaremos un objto que a su vez tendra
      // metodos que son funciones,donde modificaremos al valor de nuestra variable.
    
      function makeCounter(n){
        let count = n;
        return {
          increase: function(){
             return count + 1;
          },
          decrease: function(){
             return count - 1;
          },
          getCount: function(){
             return count ;
          },
        };
      }
      // después,  en una variable que podremos manipular con los metodos que creamos,
      // guadamos la funcion general,donde pasaremos nuestro parametro que es el que modificaremos
      // al ya asociar la variable nueva con la funcion, asi podremos acceder a ella llamando a sus metodos.
      let counter2 = makeCounter(10);
      console.log(` this count is: ${counter2.getCount()}`)
      console.log(` this count is: ${counter2.increase()}`)
      console.log(` this count is: ${counter2.decrease()}`)
      //___________________________________

      // Closures
      // printColor

      // IIFE
      // (function() {
      //   let color = 'green';

      //   function printColor() {
      //     console.log(color);
      //   }

      //   printColor();
      // })();

      // Funciones que regresan funciones
      // function makeColorPrinter(color) {
      //   let colorMessage = `The color is ${color}`;

      //   return function() {
      //     console.log(colorMessage);
      //   };
      // }

      // let greenColorPrinter = makeColorPrinter('green');
      // console.log(greenColorPrinter());

      // variables "privadas"
      // const counter = {
      //   count: 3,
      // };
      // console.log(counter.count);
      // counter.count = 99;
      // console.log(counter.count);

      // function makeCounter(n) {
      //   let count = n;

      //   return {
      //     increase: function() {
      //       count = count + 1;
      //     },
      //     decrease: function() {
      //       count = count - 1;
      //     },
      //     getCount: function() {
      //       return count;
      //     },
      //   };
      // }

      // let counter = makeCounter(7);

      // console.log('The count is:', counter.getCount());
      // counter.increase();
      // console.log('The count is:', counter.getCount());
      // counter.decrease();
      // counter.decrease();
      // counter.decrease();
      // counter.decrease();
      // console.log('The count is:', counter.getCount());

      // counter.count = 0;
      // console.log('The count is:', counter.getCount());
    </script>
  </body>
</html>
